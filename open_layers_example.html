<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OpenLayers Basic Example</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@latest/ol.css">
  <style>
    #map {
      width: 100%;
      height: 500px;
    }
  </style>
</head>
<body>

<h2>Simple OpenLayers Map</h2>
<div id="map"></div>

<script type="module">
  import 'https://cdn.jsdelivr.net/npm/ol@latest/ol.css';
  import Map from 'https://cdn.jsdelivr.net/npm/ol@latest/Map.js';
  import View from 'https://cdn.jsdelivr.net/npm/ol@latest/View.js';
  import TileLayer from 'https://cdn.jsdelivr.net/npm/ol@latest/layer/Tile.js';
  import OSM from 'https://cdn.jsdelivr.net/npm/ol@latest/source/OSM.js';
  import VectorLayer from 'https://cdn.jsdelivr.net/npm/ol@latest/layer/Vector.js';
  import VectorSource from 'https://cdn.jsdelivr.net/npm/ol@latest/source/Vector.js';
  import Feature from 'https://cdn.jsdelivr.net/npm/ol@latest/Feature.js';
  import Point from 'https://cdn.jsdelivr.net/npm/ol@latest/geom/Point.js';
  import {fromLonLat} from 'https://cdn.jsdelivr.net/npm/ol@latest/proj.js';
  import {Icon, Style} from 'https://cdn.jsdelivr.net/npm/ol@latest/style.js';
  import Overlay from 'https://cdn.jsdelivr.net/npm/ol@latest/Overlay.js';

  // 1. Base map layer
  const baseLayer = new TileLayer({
    source: new OSM()
  });

  // 2. Create a feature (point geometry at Paris coordinates)
  const pointFeature = new Feature({
    geometry: new Point(fromLonLat([2.3522, 48.8566])), // Paris
    name: 'Paris, France'
  });

  // 3. Style for the point
  pointFeature.setStyle(new Style({
    image: new Icon({
      src: 'https://cdn-icons-png.flaticon.com/512/252/252025.png',
      scale: 0.05
    })
  }));

  const vectorSource = new VectorSource({
    features: [pointFeature]
  });

  const vectorLayer = new VectorLayer({
    source: vectorSource
  });

  // 4. Map object
  const map = new Map({
    target: 'map',
    layers: [baseLayer, vectorLayer],
    view: new View({
      center: fromLonLat([2.3522, 48.8566]), // Center on Paris
      zoom: 5
    })
  });

  // 5. Popup overlay
  const popup = document.createElement('div');
  popup.style.background = 'white';
  popup.style.padding = '5px';
  popup.style.border = '1px solid black';

  const overlay = new Overlay({
    element: popup,
    positioning: 'bottom-center',
    stopEvent: false,
    offset: [0, -10]
  });
  map.addOverlay(overlay);

  // 6. Click event for popup
  map.on('click', function (evt) {
    const feature = map.forEachFeatureAtPixel(evt.pixel, f => f);
    if (feature) {
      const coordinate = evt.coordinate;
      popup.innerHTML = feature.get('name');
      overlay.setPosition(coordinate);
    } else {
      overlay.setPosition(undefined);
    }
  });
</script>

</body>
</html>
